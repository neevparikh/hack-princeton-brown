<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Flosix - Bootstrap template, Creative One Page Template</title>
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/flexslider.css">
  <link rel="stylesheet" href="css/jquery.fancybox.css">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/responsive.css">
  <link rel="stylesheet" href="css/animate.min.css">
  <link rel="stylesheet" href="css/font-icon.css">
  <script src="./lib.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <script src="https://js.stripe.com/v3/"></script>
</head>

<body>
  <!-- header section -->
  <section class="banner" role="banner">
    <!--header navigation -->
    <header id="header">
      <div class="header-content clearfix"> <a class="logo" href="#"><img src="images/logo.png" alt=""></a>
        <nav class="navigation" role="navigation">
          <!-- <ul class="primary-nav">
          <li><a href="#intro">Intro</a></li>
          <li><a href="#services">Services</a></li>
          <li><a href="#works">Works</a></li>
          <li><a href="#teams">Our Team</a></li> -->
          <li><a href="#intro">How it works</a></li>
          <li><a href="#footer">Contact</a></li>
          </ul>
        </nav>
        <a href="#" class="nav-toggle">Menu<span></span></a> </div>
    </header>
    <!--header navigation -->
    <!-- banner text -->
    <div class="container">
      <div class="col-md-10 col-md-offset-1">
        <div class="banner-text text-center">
          <h1>FIREARMS</h1>

          <!-- Search bar -->
          <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
            crossorigin="anonymous">

          <!-- Form for the search -->
          <form id="search-form" action="">
            <input id="bar" type="search" placeholder="Enter a city to map the heat" name="query" autofocus>
            <i class="fa fa-search">
              <input id="submit-button" type="submit" value="" placeholder="" />
            </i>
          </form>
        </div>
        <!-- banner text -->
      </div>
    </div>
  </section>
  <!-- header section -->
  <!-- about section -->
  <section id="intro" class="section intro no-padding">
    <div class="container-fluid">
      <div class="row no-gutter">
        <div class="flexslider">
          <ul class="slides">
            <li>
              <div class="col-md-6">
                <div class="avatar"> <img src="images/intro-img1.jpg" alt="" class="img-responsive"> </div>
              </div>
              <div class="col-md-6">
                <blockquote>
                  <h1>Support the families</h1>
                  <p>There are atleast a thousand cases of mass shootings per year in the US alone. This problem is only
                    growing, and the families are not taking it an easier. Take initiative and support this cause by dinating
                    to the families of victims who were just unlucky to be a part of such inhumane acts. </p>
                  <p>We accept donations for the top charities that are doing their best to stop gun violence. </p>
                  <input type="button" class="donate-button" value="Donate" />
                </blockquote>
              </div>
            </li>
            <li>
              <div class="col-md-6">
                <div class="avatar"> <img src="images/intro-img2.jpg" alt="" class="img-responsive"> </div>
              </div>
              <div class="col-md-6">
                <blockquote>
                  <h1>Make the cities better </h1>
                  <p>Donate to the cities we predict to be the most prone to shootings. Again, these payments are completely
                    secure and directly go to legislature/charity organizations that plan to make the world a better place</p>
                  <input type="button" class="donate-button" value="Donate" />
                </blockquote>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>
  <!-- payment section -->
  <form action="/charge" method="post" id="payment-form">
    <div class="form-row">
      <label for="card-element">
        Credit or debit card
      </label>
      <div id="card-element">
        <!-- A Stripe Element will be inserted here. -->
      </div>

      <!-- Used to display form errors. -->
      <div id="card-errors" role="alert"></div>
    </div>

    <button>Submit Payment</button>
  </form>



  <!-- Footer section -->
  <footer class="footer" id="footer">
    <div class="footer-top section">
      <div class="container">
        <div class="row">
          <div class="footer-col col-md-6">
            <h5>Our Office Location</h5>
            <p>Collins Street West Victoria 8007 Australia.<br> 1800 1234 56789 / 98532100987<br> support@flosix.com
            </p>
            <p>Copyright Â© 2015 Flosix Inc. All Rights Reserved. Made with <i class="fa fa-heart pulse"></i> by <a href="http://www.designstub.com/">Designstub</a></p>
          </div>
          <div class="footer-col col-md-3">
            <h5>Services We Offer</h5>
            <p>
              <ul>
                <li><a href="#">Digital Strategy</a></li>
                <li><a href="#">Websites</a></li>
                <li><a href="#">Videography</a></li>
                <li><a href="#">Social Media</a></li>
                <li><a href="#">User Experience</a></li>
              </ul>
            </p>
          </div>
          <div class="footer-col col-md-3">
            <h5>Share with Love</h5>
            <ul class="footer-share">
              <li><a href="#"><i class="fa fa-facebook"></i></a></li>
              <li><a href="#"><i class="fa fa-twitter"></i></a></li>
              <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
              <li><a href="#"><i class="fa fa-google-plus"></i></a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <!-- footer top -->

  </footer>
  <!-- Footer section -->
  <!-- JS FILES -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.flexslider-min.js"></script>
  <script src="js/jquery.fancybox.pack.js"></script>
  <script src="js/retina.min.js"></script>
  <script src="js/modernizr.js"></script>
  <script src="js/main.js"></script>

  <script>
    $(document).ready(function () {

      $('form').submit(false);

      // If the user pressed enter on the search
      $('#bar').keypress(function (e) {
        if (e.which == 13) {
          lib.isonlaxman.search($('#bar').val(), function (data) {
            var as_json = JSON.parse(data);

            // Someone do the map thing 
          });
        }
      });

      // Or pressed the search button
      $("#submit-button").on('click', function () {
        $('form').submit();
        return false;
      });

      // On hover on bar
      $('form').one('mouseover', function () {
        $('form').addClass('permahover');
      })

      // On donate button press
      $('.donate-button').on('click', function () {
        console.log("CLICK");
        // lib.isonlaxman.donate['@dev'](function (charge) {
        //   console.log(charge);
        // });
      });
    });
  </script>


  <!-- Load the Stripe element -->
  <script>
    $(document).ready(function () {
      var stripe = Stripe('pk_test_pPSDPhP3a9L1t545BCGfY5mW');

      // Create an instance of Elements.
      var elements = stripe.elements();

      // Custom styling can be passed to options when creating an Element.
      // (Note that this demo uses a wider set of styles than the guide below.)
      var style = {
        base: {
          color: '#32325d',
          fontFamily: '"Helvetica Neue", Helvetica, sans-serif',
          fontSmoothing: 'antialiased',
          fontSize: '16px',
          '::placeholder': {
            color: '#aab7c4'
          }
        },
        invalid: {
          color: '#fa755a',
          iconColor: '#fa755a'
        }
      };

      // Create an instance of the card Element.
      var card = elements.create('card', { style: style });

      // Add an instance of the card Element into the `card-element` <div>.
      card.mount('#card-element');

      // Handle real-time validation errors from the card Element.
      card.addEventListener('change', function (event) {
        // console.log("ERROR", event);
        var displayError = document.getElementById('card-errors');
        if (event.error) {
          displayError.textContent = event.error.message;
        } else {
          displayError.textContent = '';
        }
      });

      // Handle form submission.
      var form = document.getElementById('payment-form');
      form.addEventListener('submit', function (event) {
        // console.log("FORM LISTENER", event);
        event.preventDefault();

        stripe.createToken(card).then(function (result) {
          if (result.error) {
            // Inform the user if there was an error.
            var errorElement = document.getElementById('card-errors');
            errorElement.textContent = result.error.message;
          } else {
            // Send the token to your server.
            stripeTokenHandler(result.token);
          }
        });
      });

      // Submit the form with the token ID.
      function stripeTokenHandler(token) {
        // Insert the token ID into the form so it gets submitted to the server
        console.log("HANDLER", form);
        var form = document.getElementById('payment-form');
        var hiddenInput = document.createElement('input');

        hiddenInput.setAttribute('type', 'hidden');
        hiddenInput.setAttribute('name', 'stripeToken');
        hiddenInput.setAttribute('value', token.id);
        form.appendChild(hiddenInput);

        // Submit the form
        console.log(form, typeof (form));
        lib.isonlaxman.donate(form);
      }
    });
  </script>

</body>

</html>